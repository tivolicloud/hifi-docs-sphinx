

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Customize Avatar Animations &mdash; High Fidelity Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/fav-icon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="Tutorial: Create an Avatar with Fuse" href="../fuse-tutorial/" />
    <link rel="prev" title="Add Flow to Your Avatar" href="../add-flow/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://www.highfidelity.com">
          

          
            
            <img src="../../../_static/hifi-logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search/" method="get">
    <input type="text" name="q" placeholder="Search High Fidelity Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<p style="margin-bottom: 10px; margin-top: 10px;"><a href="https://forums.highfidelity.com/t/company-update-a-new-beginning-faq/15817"><strong>IMPORTANT</strong>: High Fidelity GitHub Will Become Private Jan 15, 2020</a></p>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../home/">HOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../explore/">EXPLORE</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">CREATE</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../tools/">Create Tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">Avatars</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../create-avatars/">Create Your Own Avatar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../find-avatars/">Find and Use an Existing Avatar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../package-avatar/">Package and Host Your Avatar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add-flow/">Add Flow to Your Avatar</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Customize Avatar Animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fuse-tutorial/">Tutorial: Create an Avatar with Fuse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mixamo-tutorial/">Tutorial: Rig Avatars in Mixamo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blender-tutorial/">Tutorial: Modify Materials and Textures with Blender</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scattering-tutorial/">Tutorial: Add a Scattering Effect</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../wearables/">Wearables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../entities/">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3d-models/">3D Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../environments/">Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applications/">Tablet Apps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../script/">SCRIPT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../host/">HOST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sell/">SELL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/">CONTRIBUTE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/">RELEASE NOTES</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apidocs.highfidelity.com">API REFERENCE</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../">HiFi Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    You are here: 
      <li><a href="../../../"><i class="fa fa-home"></i></a> &raquo;</li>
        
          <li><a href="../../">Create</a> &raquo;</li>
        
          <li><a href="../">Avatars</a> &raquo;</li>
        
      <li>Customize Avatar Animations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/create/avatars/custom-animations.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="customize-avatar-animations">
<h1><a class="toc-backref" href="#id1">Customize Avatar Animations</a><a class="headerlink" href="#customize-avatar-animations" title="Permalink to this headline">¶</a></h1>
<p>You can express yourself by overriding High Fidelity’s standard set of animations with your own custom animations such as dancing, juggling, or waving. Any custom animations you set up will be independent to each avatar you own and wear.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We often update our process for importing custom animations to make it more user friendly. As you develop custom animations, keep in mind that you may need to modify them in the future as our custom animation support continues to improve.</p>
</div>
<div class="contents topic" id="on-this-page">
<p class="topic-title">On This Page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#customize-avatar-animations" id="id1">Customize Avatar Animations</a></p>
<ul>
<li><p><a class="reference internal" href="#prerequisites" id="id2">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#prepare-your-custom-animation" id="id3">Prepare Your Custom Animation</a></p></li>
<li><p><a class="reference internal" href="#replace-standard-animations" id="id4">Replace Standard Animations</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id2">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>As we delve deeper into creating custom animations, we may use terminology that you are unfamiliar with. Here are some terms you might come across:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Term</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Avatar animations</p></td>
<td><p>Avatar animations are FBX files that define how your avatar moves. For example, <a class="reference external" href="https://github.com/highfidelity/hifi/blob/master/interface/resources/avatar/animations/turn_left.fbx">turn_left.fbx</a> is the standard animation file for your avatar turning left.</p></td>
</tr>
<tr class="row-odd"><td><p>Animation roles</p></td>
<td><p>Animation roles are triggers that map to an action that an avatar can perform.
For example, turnLeft is an animation role that makes your avatar turn left
while standing in place. This animation role is mapped to the turn_left.fbx
file. You can see this in action by pressing the left arrow key or <code class="docutils literal notranslate"><span class="pre">A</span></code> in Desktop
mode or using your hand controllers in VR mode.</p></td>
</tr>
<tr class="row-even"><td><p>Avatar Animation JSON or
Animation Graph File</p></td>
<td><p>The standard animation system blends and layers a series of animations from
FBX files using a JSON data file. This JSON file is called the Animation Graph file,
and it specifies exactly which animations to play and how they are blended.
It also determines the order of operations, so that operations like Inverse Kinematics
occur after the rest of the body has been animated by traditional means.
By default, every avatar uses the same <a class="reference external" href="https://github.com/highfidelity/hifi/blob/master/interface/resources/avatar/avatar-animation.json">Animation Graph file</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="prepare-your-custom-animation">
<h2><a class="toc-backref" href="#id3">Prepare Your Custom Animation</a><a class="headerlink" href="#prepare-your-custom-animation" title="Permalink to this headline">¶</a></h2>
<p>Before you replace the existing standard animations, you need to prepare your custom animation file. Use our <a class="reference internal" href="../avatar-standards/"><span class="doc">Avatar Standards Guide</span></a> and keep the following guidelines in mind:</p>
<ul class="simple">
<li><p>Animations must have standard joint names for High Fidelity.</p></li>
<li><p>Animations must have standard joint orientations (y down the bone).</p></li>
<li><p>Key frames must have key frames for every joint at a uniform interval of 30 frames per second.</p></li>
<li><p>Locomotion animation phase has the left ankle in passing position on the first frame. Try to match this phase if you want your locomotion animation to blend with the default set.</p></li>
</ul>
<p>Once you create your animation:</p>
<ol class="arabic simple">
<li><p>Export your animation from the external tool of your choice as an FBX file.</p></li>
<li><p>Upload your animation FBX file to a cloud server and copy the URL.</p></li>
</ol>
</div>
<div class="section" id="replace-standard-animations">
<h2><a class="toc-backref" href="#id4">Replace Standard Animations</a><a class="headerlink" href="#replace-standard-animations" title="Permalink to this headline">¶</a></h2>
<p>You can have your avatar use your custom animations by overriding the default animations. There are two different ways to do this:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#override-using-a-script">Override Using a Script</a>: Write a script to override standard animations.</p></li>
<li><p><a class="reference internal" href="#create-a-custom-avatar-animation-json-file">Create a Custom Avatar Animation JSON file</a>: You can modify this file or create a new data file.</p></li>
</ul>
<div class="section" id="override-using-a-script">
<h3>Override Using a Script<a class="headerlink" href="#override-using-a-script" title="Permalink to this headline">¶</a></h3>
<p>You can <a class="reference external" href="../../script/write-scripts.html">write a script</a> and use the <a class="reference external" href="https://apidocs.highfidelity.com/MyAvatar.html">MyAvatar</a> namespace to override an existing animation or animation role.</p>
<p>We’ve listed the methods you can use to replace the standard animations on your avatar.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://apidocs.highfidelity.com/MyAvatar.html#.overrideAnimation">MyAvatar.overrideAnimation</a></p></td>
<td><p>This method can be used to play any animation on the current avatar. It will
move smoothly from the current pose to the starting frame of the custom
animation. For example, if your avatar is waving, this script will stop your
avatar waving and play the custom animation provided.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://apidocs.highfidelity.com/AnimationCache.html#.prefetch">AnimationCache.prefetch</a></p></td>
<td><p>This method fetches a resource. You can use this to fetch a custom animation
you’ve hosted on a cloud server. If you do not prefetch your animations before
playing them, you might see a t-pose appear briefly as the animation is
downloaded.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://apidocs.highfidelity.com/MyAvatar.html#.restoreAnimation">MyAvatar.restoreAnimation</a></p></td>
<td><p>This method stops the override function from playing any custom animation.
Your avatar will go back to playing the standard animations.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This process to replace an existing animation will take complete control of all avatar joints. Inverse Kinematics of the hands and head of HMD users will be disabled.</p>
</div>
<p>You can also override an existing animation role mapping:</p>
<ol class="arabic simple">
<li><p>Use <a class="reference external" href="https://apidocs.highfidelity.com/MyAvatar.html#.getAnimationRoles">MyAvatar.getAnimationRoles</a> to view the list of roles for the current avatar.</p></li>
<li><p>You can replace the animation for each role with a custom animation (FBX file) using <a class="reference external" href="https://apidocs.highfidelity.com/MyAvatar.html#.overrideRoleAnimation">MyAvatar.overrideRoleAnimation</a>.</p></li>
</ol>
<p>We’ve listed the animation roles and their description. These are frequently updated, so we recommend using <code class="docutils literal notranslate"><span class="pre">MyAvatar.getAnimationRoles</span></code> to get the latest animation roles before continuing. The standard animation FBX files for these roles can be found in the High Fidelity source code repository on <a class="reference external" href="https://github.com/highfidelity/hifi/tree/master/interface/resources/avatar/animations">GitHub</a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Animation Roles</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>rightHandGraspOpen</p></td>
<td><p>When hand controller trigger is not squeezed.</p></td>
</tr>
<tr class="row-odd"><td><p>rightHandGraspClosed</p></td>
<td><p>When hand controller trigger is fully squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>rightIndexPointOpen</p></td>
<td><p>Point gesture.</p></td>
</tr>
<tr class="row-odd"><td><p>rightIndexPointClosed</p></td>
<td><p>Point gesture with trigger squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>rightThumbRaiseOpen</p></td>
<td><p>Thumbs up gesture.</p></td>
</tr>
<tr class="row-odd"><td><p>rightThumbRaiseClosed</p></td>
<td><p>Thumbs up gesture with trigger squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>rightIndexPointAndThumbRaiseOpen</p></td>
<td><p>Simultaneous thumbs up and point gesture.</p></td>
</tr>
<tr class="row-odd"><td><p>rightIndexPointAndThumbRaiseClosed</p></td>
<td><p>Simultaneous thumbs up and point gesture, with trigger squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>leftHandGraspOpen</p></td>
<td><p>When hand controller trigger is not squeezed.</p></td>
</tr>
<tr class="row-odd"><td><p>leftHandGraspClosed</p></td>
<td><p>When hand controller trigger is fully squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>leftIndexPointOpen</p></td>
<td><p>Point gesture.</p></td>
</tr>
<tr class="row-odd"><td><p>leftIndexPointClosed</p></td>
<td><p>Point gesture with trigger squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>leftThumbRaiseOpen</p></td>
<td><p>Thumbs up gesture.</p></td>
</tr>
<tr class="row-odd"><td><p>leftThumbRaiseClosed</p></td>
<td><p>Thumbs up gesture with trigger squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>leftIndexPointAndThumbRaiseOpen</p></td>
<td><p>Simultaneous thumbs up and point gesture.</p></td>
</tr>
<tr class="row-odd"><td><p>leftIndexPointAndThumbRaiseClosed</p></td>
<td><p>Simultaneous thumbs up and point gesture, with trigger squeezed.</p></td>
</tr>
<tr class="row-even"><td><p>idleStand</p></td>
<td><p>Standing still, not talking.</p></td>
</tr>
<tr class="row-odd"><td><p>idleTalk</p></td>
<td><p>Standing still, but avatar is talking.</p></td>
</tr>
<tr class="row-even"><td><p>walkFwdShort_c</p></td>
<td><p>Walking forward at 0.5 m/s.</p></td>
</tr>
<tr class="row-odd"><td><p>walkFwdNormal_c, walkFwdFast_c</p></td>
<td><p>Walking forward at 1.8 m/s. Walking forward at 2.3 m/s.</p></td>
</tr>
<tr class="row-even"><td><p>walkFwdJog_c, walkFwdRun_c</p></td>
<td><p>Walking forward at 3.2 m/s. Walking forward at 4.5 m/s.</p></td>
</tr>
<tr class="row-odd"><td><p>idleToWalkFwd, idleSettle</p></td>
<td><p>Short transition from standing idle to walking forward.
Transition from walk to idle.</p></td>
</tr>
<tr class="row-even"><td><p>walkBwdShort_c</p></td>
<td><p>Walking backward at 0.6 m/s.</p></td>
</tr>
<tr class="row-odd"><td><p>walkBwdFast_c, jogBwd_c, runBwd_c</p></td>
<td><p>Walking backward at 1.6 m/s. Jog backward at 2.3 m/s. Jog
backward at 3.1 m/s.</p></td>
</tr>
<tr class="row-even"><td><p>turnLeft</p></td>
<td><p>Standing turning in place animation.</p></td>
</tr>
<tr class="row-odd"><td><p>turnRight</p></td>
<td><p>Standing turning in place animation.</p></td>
</tr>
<tr class="row-even"><td><p>strafeLeftShortStep_c</p></td>
<td><p>Sidestep at 0.1 m/s.</p></td>
</tr>
<tr class="row-odd"><td><p>strafeLeftStep_c, strafeLeftWalk_c,
strafeLeftWalkFast_c, strafeLeftJog_c</p></td>
<td><p>Sidestep at 0.5 m/s. Side walk at 1.0 m/s. Side walk at 2.6 m/s.
Side jog at 3.0 m/s.</p></td>
</tr>
<tr class="row-even"><td><p>strafeRightShortStep_c, strafeRightStep_c</p></td>
<td><p>Sidestep at 0.1 m/s. Sidestep at 0.5 m/s.</p></td>
</tr>
<tr class="row-odd"><td><p>strafeRightWalk_c, strafeRightFast_c,
strafeRightJog_c, stepLeftShort_c,
stepLeft_c, strafeLeftAnim_c,
stepRightShort_c, stepRight_c,
strafeRightAnim_c</p></td>
<td><p>Side walk at 1 m/s. Sidewalk at 2.6 m/s Side jog at 3 m/s.
HMD step left at 0 m/s. HMD step left at 0.5 m/s. HMD strafe
left at 2.5 m/s. HMD step right at 0 m/s. HMD step right at 0.5 m/s.
HMD strafe right at 2.5 m/s.</p></td>
</tr>
<tr class="row-even"><td><p>fly</p></td>
<td><p>Flying idle.</p></td>
</tr>
<tr class="row-odd"><td><p>takeoffStand</p></td>
<td><p>Standing jump takeoff.</p></td>
</tr>
<tr class="row-even"><td><p>TAKEOFFRUN</p></td>
<td><p>Running jump takeoff.</p></td>
</tr>
<tr class="row-odd"><td><p>inAirStandPreApex</p></td>
<td><p>Standing jump in air on the way upward towards the jump apex.</p></td>
</tr>
<tr class="row-even"><td><p>inAirStandApex</p></td>
<td><p>Standing jump in air at apex of the jump.</p></td>
</tr>
<tr class="row-odd"><td><p>inAirStandPostApex</p></td>
<td><p>Standing jump in air on the downward arc of the jump.</p></td>
</tr>
<tr class="row-even"><td><p>inAirRunPreApex</p></td>
<td><p>Running jump in air on the way upward towards the jump apex.</p></td>
</tr>
<tr class="row-odd"><td><p>inAirRunApex</p></td>
<td><p>Running jump in air at apex of the jump.</p></td>
</tr>
<tr class="row-even"><td><p>inAirRunPostApex</p></td>
<td><p>Running jump in air on the downward arc of the jump.</p></td>
</tr>
<tr class="row-odd"><td><p>landStandImpact</p></td>
<td><p>Standing land.</p></td>
</tr>
<tr class="row-even"><td><p>landStand</p></td>
<td><p>Standing land.</p></td>
</tr>
<tr class="row-odd"><td><p>LANDRUN</p></td>
<td><p>Running land.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-custom-avatar-animation-json-file">
<h3>Create a Custom Avatar Animation JSON file<a class="headerlink" href="#create-a-custom-avatar-animation-json-file" title="Permalink to this headline">¶</a></h3>
<p>If you’re not comfortable using a script, you can edit or replace the existing Avatar Animation JSON file to override the standard animations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you create a custom JSON file for your avatar’s animations, you will not inherit any updates made to the standard animations’ JSON file. You can perform a text merge to the latest version at any time.</p>
</div>
<p>The JSON file shows which animation role is mapped to which animation FBX file. You can replace standard animation FBX files with your custom animation’s FBX files. Or, you can write a new JSON file with the new mappings for each animation role.</p>
<p>To replace standard animations:</p>
<ol class="arabic simple">
<li><p>Upload your custom JSON file to a cloud server and copy the URL.</p></li>
<li><p>In Interface, pull up your HUD or Tablet and go to <strong>Avatar</strong>.</p></li>
<li><p>Click on the Settings icon on the top-right corner.</p></li>
<li><p>Under ‘Avatar Animation JSON’, paste the URL for your JSON file.</p></li>
</ol>
<p>OR</p>
<ol class="arabic simple">
<li><p>Open your avatar’s FST file in a text editor.</p></li>
<li><p>Add your Animation Graph file’s URL.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to run your avatar’s files through the <a class="reference external" href="package-avatar.html#host-your-avatar">Avatar Packager</a> to include the changes in your FST file.</p>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">animGraphUrl</span> <span class="o">=</span> <span class="s2">&quot;URL&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Here is the current default <a class="reference external" href="https://github.com/highfidelity/hifi/blob/master/interface/resources/avatar/avatar-animation.json">avatar-animation.json</a> file.</p></li>
<li><p>This <a class="reference external" href="https://s3.amazonaws.com/hifi-public/tony/scoot-animation.json">scoot-animation.json</a> file replaces the idle and walk animations with a sitting pose. This example shows how you can replace some of an avatar’s default animations.</p></li>
</ul>
</div>
<div class="section" id="advanced-topic-animnode-system">
<h3>Advanced Topic: AnimNode System<a class="headerlink" href="#advanced-topic-animnode-system" title="Permalink to this headline">¶</a></h3>
<p>The Avatar Animation JSON file contains a hierarchical tree of nodes called the AnimNode System. The AnimNode system defines how an avatar moves and is described in the Animation Graph JSON file.</p>
<p>The movement of an avatar is determined by a complex blend of procedural animation, pre-recorded animation clips, and inverse kinematics. This blend is calculated at every frame to ensure that the avatar body follows physics and controller input as rapidly as possible. It must handle animation for desktop users, HMD users, and users wearing a full set of HTC Vive trackers. It must be configured on the fly as sensors are added and removed from the system. It should also be open to extensions so unique animations and avatar configurations are possible. These functionalities are handled by the AnimNode system.</p>
<p>We’ve listed some features of the system:</p>
<ul class="simple">
<li><p>The AnimNode system is a graph of nodes.</p></li>
<li><p>Some nodes are output only, such as pre-recorded animation clips.</p></li>
<li><p>Other nodes produce output by processing nodes below it in the graph and blending the results together.</p></li>
<li><p>By manipulating the node hierarchy, certain animation actions will occur before or after other animation actions.</p></li>
<li><p>The node parameters can be dynamically changed at runtime. This flexibility is necessary to achieve good visual results.</p></li>
<li><p>The system is in the default Animation Graph JSON file and is loaded during avatar initialization.</p></li>
</ul>
<p><strong>Key Concepts</strong></p>
<p>The AnimNode system operates like an expression parse tree.  For example the following expression: <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">+</span> <span class="pre">3</span> <span class="pre">*</span> <span class="pre">7</span> <span class="pre">-</span> <span class="pre">(5</span> <span class="pre">/</span> <span class="pre">(3</span> <span class="pre">+</span> <span class="pre">4))</span> <span class="pre">+</span> <span class="pre">6</span></code>, can be represented by the following parse tree.</p>
<img alt="../../../_images/animnode.png" src="../../../_images/animnode.png" />
<p>This parse tree can then be evaluated at runtime to compute the actual value. In this tree, the leaf nodes are values and interior nodes are operations that combine two or more sub-trees and produce a new value. The tree is evaluated until there is a single value remaining, which should be the result of the entire expression: <code class="docutils literal notranslate"><span class="pre">30.2957142</span></code>.</p>
<p>In the expression case, the output value of each node is a floating point number, and operations can be implemented simply by evaluating each sub-tree, and then combining them with an arithmetic operation, such as addition or multiplication.</p>
<p>The AnimNode system works on a similar concept. Except the value of each node contains all of the avatar’s joint translations and rotations. Leaf nodes can be static avatar poses, such as the T-pose or can be a single frame of an animation clip. Interior nodes can perform operations such as blending between two or more sub-trees, or combining the upper body of one animation with the lower body of another.</p>
<p><strong>See Also</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../avatar-standards/"><span class="doc">Avatar Standards Guide</span></a></p></li>
<li><p><a class="reference internal" href="../../../script/"><span class="doc">Script</span></a></p></li>
<li><p><a class="reference external" href="https://apidocs.highfidelity.com/MyAvatar.html">API Reference: MyAvatar</a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fuse-tutorial/" class="btn btn-neutral float-right" title="Tutorial: Create an Avatar with Fuse" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../add-flow/" class="btn btn-neutral float-left" title="Add Flow to Your Avatar" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, High Fidelity

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  

    <!-- Start of HubSpot Embed Code -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5066246.js"></script>
    <!-- End of HubSpot Embed Code -->

    <!-- Start Quantcast Tag -->
    <script type="text/javascript">
    var _qevents = _qevents || [];
     (function() {
       var elem = document.createElement('script');
       elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
       elem.async = true;
       elem.type = "text/javascript";
       var scpt = document.getElementsByTagName('script')[0];
       scpt.parentNode.insertBefore(elem, scpt);
      })();
    _qevents.push({qacct: "p-tK6PFLJY3q1s-"});
    </script>
    <noscript>
     <img src="//pixel.quantserve.com/pixel/p-tK6PFLJY3q1s-.gif?labels=_fp.event.Default" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>
    </noscript>
    <!-- End Quantcast Tag -->

    <!-- Start Hotjar Tracking Code for https://highfidelity.com/ -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:908553,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    <!-- End Hotjar Tracking Code for https://highfidelity.com/ --> 

</body>
</html>